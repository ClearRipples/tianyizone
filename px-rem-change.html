<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>页面源代码中替换 px 为 rem</title>
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, minimal-ui, shrink-to-fit=no">
<style>
body {font-size: 14px;font: normal 14px/20px Arial, Roboto, 'Droid Sans', 'Hiragino Sans GB', 'Microsoft YaHei', 'Simsun', STXihei, 'sans-serif';}
p {width: 200px;height: 100px;padding: 5px;margin: 5px auto 10px;font-size: 16px;border: 1px solid #000;}
p + p {height: 200px;padding: 20px 5px 10px 30px;border-width: 10px;}
p:nth-of-type(3) {width: 100px;height: 50px;border: 5px solid #f00;}
</style>
</head>
<body>
<button id="f100">正常16px</button> <button id="f150">放大1.5</button> <button id="f200">放大2</button>
<p>这里是文字，外面有边框</p>
<p>这里是文字，外面有边框</p>
<p>这里是文字，外面有边框</p>
<script>
window.onload = function() {
	var sty = document.getElementsByTagName("style")[0],
		pattFont = /((font.+?)(\d+)rem\/)(\d+)rem/g,
		patt = /(\d+)(px*)/g,
		pattBorder = /(border.+?)(\d+.\d+)(rem*)/g,
		old_sty = sty.innerHTML;
		result = "";
	function changeNow() {
		result = sty.innerHTML.replace(patt, 
				function($1,$2){
					return((Number($2)/100) + "rem");
				})
		result = result.replace(pattBorder, 
				function($1,$2,$3,$4){
					return($2 + (Number($3)*100) + "px");
				})
		result = result.replace(pattFont, 
				function($1,$2,$3,$4,$5){
					return($3 + (Number($4)/100) + "rem/" + (Number($5)) + "px");
				})
		// console.log(result);
	}

	var f100 = document.getElementById("f100"),
		f150 = document.getElementById("f150"),
		f200 = document.getElementById("f200");

	f100.onclick = function() {
		sty.innerHTML = old_sty;
		changeNow();
		sty.innerHTML = "html {font-size: 100px;}" + result;
	}
	f150.onclick = function() {
		sty.innerHTML = old_sty;
		changeNow();
		sty.innerHTML = "html {font-size: 150px;}" + result;
	}
	f200.onclick = function() {
		sty.innerHTML = old_sty;
		changeNow();
		sty.innerHTML = "html {font-size: 200px;}" + result;
	}
}
</script>
</body>
</html>